<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Ù„ÙˆØ­Ø© Ø§Ù„Ø£Ø¯Ù…Ù† - Ø§Ø³ØªÙ‚Ø¨Ø§Ù„ Ø§Ù„Ø·Ù„Ø¨Ø§Øª</title>
  <style>
    body{
      font-family: Tahoma, Arial;
      background:#f5f7fb;
      margin:0;
      padding:0;
    }
    .top{
      background:#198754;
      color:#fff;
      padding:18px;
      text-align:center;
      font-size:22px;
      font-weight:bold;
    }
    .box{
      max-width:650px;
      margin:20px auto;
      background:#fff;
      border-radius:14px;
      padding:18px;
      box-shadow:0 6px 18px rgba(0,0,0,0.08);
    }
    .row{
      display:flex;
      gap:10px;
      flex-wrap:wrap;
      margin-bottom:12px;
    }
    .btn{
      padding:12px 14px;
      border:none;
      border-radius:12px;
      font-size:15px;
      font-weight:bold;
      cursor:pointer;
    }
    .refresh{ background:#0d6efd; color:#fff; }
    .clear{ background:#dc3545; color:#fff; }
    .back{ background:#6c757d; color:#fff; }
    .order{
      border:1px solid #e6e6e6;
      border-radius:14px;
      padding:14px;
      margin-top:12px;
      background:#fafafa;
    }
    .order h3{
      margin:0 0 8px;
      font-size:18px;
      color:#111;
    }
    .meta{
      font-size:14px;
      color:#333;
      margin:4px 0;
    }
    .time{
      font-size:13px;
      color:#666;
      margin-top:8px;
    }
    .del{
      margin-top:10px;
      background:#dc3545;
      color:#fff;
      width:100%;
    }
    .empty{
      text-align:center;
      color:#666;
      font-size:15px;
      padding:20px 0;
    }
  </style>
</head>

<body>
  <div class="top">Ù„ÙˆØ­Ø© Ø§Ù„Ø£Ø¯Ù…Ù† (Ø§Ø³ØªÙ‚Ø¨Ø§Ù„ Ø§Ù„Ø·Ù„Ø¨Ø§Øª)</div>

  <div class="box">

    <div class="row">
      <button class="btn refresh" onclick="loadOrders()">ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø·Ù„Ø¨Ø§Øª</button>
      <button class="btn clear" onclick="clearAll()">Ø­Ø°Ù ÙƒÙ„ Ø§Ù„Ø·Ù„Ø¨Ø§Øª</button>
      <button class="btn back" onclick="location.href='/'">Ø±Ø¬ÙˆØ¹ Ù„Ù„Ø¨ÙˆØ§Ø¨Ø©</button>
    </div>

    <div id="ordersArea"></div>

    <div class="empty" id="emptyMsg" style="display:none;">
      Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ø·Ù„Ø¨Ø§Øª Ø­Ø§Ù„ÙŠØ§Ù‹ ğŸ“­
    </div>

  </div>

  <script>
    function loadOrders(){
      const ordersArea = document.getElementById("ordersArea");
      const emptyMsg = document.getElementById("emptyMsg");

      ordersArea.innerHTML = "";

      let orders = JSON.parse(localStorage.getItem("cnc_orders") || "[]");

      if(orders.length === 0){
        emptyMsg.style.display = "block";
        return;
      } else {
        emptyMsg.style.display = "none";
      }

      orders.reverse().forEach((o, index) => {
        const div = document.createElement("div");
        div.className = "order";

        div.innerHTML = `
          <h3>ğŸ“Œ ${o.type}</h3>
          <div class="meta"><b>Ø§Ù„Ø¹Ù…ÙŠÙ„:</b> ${o.name}</div>
          <div class="meta"><b>Ø§Ù„Ù‡Ø§ØªÙ:</b> ${o.phone}</div>
          <div class="meta"><b>Ø§Ù„ØªÙØ§ØµÙŠÙ„:</b> ${o.details}</div>
          <div class="time">ğŸ•’ ${o.time}</div>
          <button class="btn del" onclick="deleteOrder(${orders.length - 1 - index})">Ø­Ø°Ù Ø§Ù„Ø·Ù„Ø¨</button>
        `;

        ordersArea.appendChild(div);
      });
    }

    function deleteOrder(realIndex){
      let orders = JSON.parse(localStorage.getItem("cnc_orders") || "[]");
      orders.splice(realIndex, 1);
      localStorage.setItem("cnc_orders", JSON.stringify(orders));
      loadOrders();
    }

    function clearAll(){
      if(confirm("Ø£ÙƒÙŠØ¯ ØªØ¨ÙŠ ØªØ­Ø°Ù ÙƒÙ„ Ø§Ù„Ø·Ù„Ø¨Ø§ØªØŸ")){
        localStorage.removeItem("cnc_orders");
        loadOrders();
      }
    }

    // ØªØ­Ù…ÙŠÙ„ ØªÙ„Ù‚Ø§Ø¦ÙŠ Ø¹Ù†Ø¯ ÙØªØ­ Ø§Ù„ØµÙØ­Ø©
    loadOrders();
  </script>
</body>
</html>
